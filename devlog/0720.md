# ğŸ¦ DEVLOG 7/20



### #10.13 Redirecting users

**í˜ì´ì§€ ê°„ ì´ë™í•  ë•Œ ì•Œë¦¼ì¶”ê°€(ex.íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŒ)**

- redirect with states (routeì— state ì „ë‹¬)

  `history.push(routes.home,{message:"Account created. Please log in"});`

  ğŸ’¦ hashRouterë¥¼ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ `Warning: hash history cannot push state it is ignored` : ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„± -`history.push({ pathname: routes.home, message: "Account created. Please log in" });`

- useLocation (hook) : í˜„ì¬ ë¨¸ë¬´ë¥´ëŠ” í˜ì´ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ëŠ” hook

```js
// Login.js
function Login() {
    const location = useLocation();
    console.log(location);
// ìœ„ì—ì„œ ì „ë‹¬í•œ pathname, messageê°€ ë‹´ê¸´ object ì „ë‹¬
```

- Notification component ë§Œë“¤ê¸°

```js
// Login.js
<Notification>{location?.message}</Notification>  // hashRouter
<Notification>{location?.state?.message}</Notification> // browserRouter
```

- usernameê³¼ passwordë„ í•¨ê»˜ ë³´ë‚´ê¸° (ë¡œê·¸ì¸í˜ì´ì§€ì—ì„œ ë°”ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡)
  - getValues()

```js
const onCompleted = (data) => {
    const {username, password} = getValues();
    history.push({
        pathname : routes.home,
        message : "Account created. Please log in",
        username,
        password,
    })
}
```

- - defaultValues

```js
// Login.js
... = useForm({
    mode:"onChange",
    defaultValues : {
        username : location?.username || "",
        password : location?.password || "",
    }
})
```



### #10.14 Dark mode

1. ë²„íŠ¼

```JS
// AuthLayout.js
const darkMode = useReactiveVar(darkModeVar);
...
<DarkModeBtn onClick = {darkMode ? disableDarkmode : enableDarkMode}>
```

2. enable/disableDarkMode

```js
// apollo.js
export const enableDarkMode = () => {
    localStorage.setItem(DARK_MODE, "enabled");
    darkModeVar(true);
}
```



### #11.0 Header and Layout

- í˜„ì¬ header -> app.jsì—

```js
<Router>
    <Header />
    	<Switch>
    		...
```

- ê±°ì˜ ëª¨ë“  routeì— headerê°€ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ìŒ(**ë¡œê·¸ì¸, ê°€ì…í• ë•Œ ë¹¼ê³ **) => headerë‘ ê°™ì´ routeë¥¼ ë Œë”ë§í•´ì¤„ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°
  - ì»´í¬ë„ŒíŠ¸ Layoutì€ childrenê³¼ headerë¥¼ ê°™ì´ ë Œë”ë§

```js
// Layout.js
const Content = styled.main`
    margin-top : 45px;
    max-width : 930px;
    width:100%;
    margin : 0 auto;
`
function Layout({ children }) {
    return (
        <>
            <Header />
            <Content>
                {children}
            </Content>
        </>
    );
}
```

- ë¡œê·¸ì¸ë˜ì–´ìˆì„ë•Œë§Œ headerê°€ ë‚˜íƒ€ë‚˜ë„ë¡

```js
// App.js
<Route path={routes.home} exact>
    {isLoggedIn ? (
     	<Layout>
     		<Home />  // children
     	</Layout>) 
     	: 
     	<Login />}
```



### #11.1 Header part 2

- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì—¬ë¶€ì— ë”°ë¼ headerê°€ ë‹¤ë¥´ê²Œ ë³´ì´ë„ë¡

- ë¡œê·¸ì¸ì´ ë˜ì—ˆì„ ë•Œ ì•„ì´ì½˜ ë³´ì—¬ì£¼ê¸° / ë¡œê·¸ì¸ ì•ˆë˜ì—ˆì„ ê²½ìš° ë¡œê·¸ì¸ ë²„íŠ¼

```js
function Header() {
	const isLoggedIn = useReactiveVar(isLoggedInVar);
// localStorageì— í† í°ì´ ìˆìœ¼ë©´ true
    
    ...
    {isLoggedIn ? <>
         <Icon>
         	<FontAwesomeIcon icon={faHome} size="lg" />
         </Icon>
        <Icon>
             <FontAwesomeIcon icon={faCompass} size="lg" />
        </Icon>
        <Icon>
        	<FontAwesomeIcon icon={faUser} size="lg" />
        </Icon></> : (
                        <Link href={routes.home}>
                            <Button>Login</Button>
                        </Link>
                    )}
}
```

ğŸ’¡ğŸ’¡ğŸ’¡ **ë¦¬ì•¡íŠ¸ëŠ” í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë§Œì„ ë¦¬í„´í•  ìˆ˜ ìˆë‹¤**(returnë¬¸ ì•ˆì— ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ìµœìƒìœ„ íƒœê·¸ê°€ ìˆì–´ì•¼ í•œë‹¤) ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ê°œì˜ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬í„´í•˜ê¸° ìœ„í•´ì„œ **<> (fragment)**ë¥¼ ë°˜ë“œì‹œ ì¶”ê°€í•œë‹¤

- `<div>`ë¡œ ë¬¶ëŠ”ë‹¤ë©´ ìƒìœ„ì—ì„œ ì˜ë¯¸ì—†ëŠ” `<div>`ê°€ ì¶”ê°€ë˜ì–´ì„œ ë‚˜íƒ€ë‚˜ì§€ë§Œ fragmentëŠ” ìƒìœ„ì—ì„œ í‘œí˜„ë˜ì§€ ì•ŠìŒ



- ë¬¸ì œëŠ” isLoggedInì€ localStorageì— í† í°ì´ ì¡´ì¬í•˜ëŠ”ì§€ë§Œ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ì¸ì¦ëœ í† í°ì´ ì•„ë‹ˆë”ë¼ë„ trueê°€ ë¨

1. ë°±ì—”ë“œì— me.typeDefs, me.resolvers