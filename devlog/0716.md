# ğŸ– DEVLOG 7/16

### #8.0 Create React App

- 2ê°œì˜ í”„ë¡ íŠ¸ì—”ë“œ
  - ì´ ì½”ìŠ¤ì—ì„œ ê°€ë¥´ì¹˜ëŠ” ê±°
  - react native web : ë‹¨ í•˜ë‚˜ì˜ ì½”ë“œë¡œ ios, android, ì›¹ì„ í•œë²ˆì— íƒ€ê²ŸíŒ…



### #8.1 What are we going to use

1. styled components
2. react hook form
3. react router
4. apollo client
5. react helmet
6. react-fontawesome



### #8.2 What does setup mean?

- setup : applicationì˜ í† ëŒ€ë¥¼ ë§Œë“œëŠ” ê²ƒ

1. set up the router (ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ íšŒì›ê°€ì…ì„ ëˆ„ë¥´ë©´ íšŒì›ê°€ì… í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤Œ)
2. authentication (ë¡œê·¸ì•„ì›ƒ ëœ ê±¸ ì¸ì§€í•˜ê³  ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤Œ)
3. architecture (components, styles, screens, routerë¥¼ ì–´ë””ì— ë†“ì„ì§€)
4. setting up style system (dark mode ì „í™˜ - ì²˜ìŒë¶€í„° ì…‹ì—…í•´ë†“ì•„ì•¼ í•¨)





### #8.3 Router Setup part 1

1. setting up router

- router : urlì„ ê°€ì ¸ì™€ì„œ ê±°ê¸°ì— ë§ëŠ” componentë¥¼ ë³´ì—¬ì¤Œ (/login -> login ì»´í¬ë„ŒíŠ¸)
- hash routerì—ì„œ ì‹œì‘í•´ì„œ browser routerë¡œ switch

```js
import {HashRouter as Router} from "react-router-dom";

function App() {
    return {
        <div>
        	<Router>
        		<Route path="/"></Route>
        		<Route path="/banana"></Route>
        		<Route path="/banana/is/delicious"></Route>
        	</Router>
        </div>
    }
}
```

#### how react router works (pattern matching)

- `/banana/is/delicious` ëŠ” `/`, `/banana` ì—ë„ ë§¤ì¹˜ë¨ 

- how do we fix this? =>  add **<Switch>** : only render one route at the time 
  - `/banana`ëŠ” `/` ì—**ë§Œ** ë§¤ì¹­ë¨
- how to fix this? => add **exact**

```js
<Router>
        <Switch>
          <Route path="/" exact>
            <h1>Home</h1>
          </Route>
          <Route path="/potato">
            <h1>Potato</h1>
          </Route>
          <Route path="banana">
            <h1>Banana</h1>
          </Route>
        </Switch>
</Router>
```

#### hash router ì™€ browser router ì˜ ì°¨ì´

- hash routerëŠ” ê¸°ë³¸ì ìœ¼ë¡œ hash(#)ë¥¼ ê°€ì§

  -> `localhost:3000/#/banana`

- browser routerëŠ” deployí•  ë•Œ ëª‡ê°€ì§€ ì²˜ë¦¬ê°€ í•„ìš”(hash routerê°€ deployê°€ ì‰¬ì›€)



### #8.4 Router Setup part 2

- ë¡œê·¸ì¸ í™”ë©´ì€ completely different component / í”„ë¡œí•„ í™”ë©´ì€ ëª¨ë‘ ê°™ì€ component

- **screen** : routeì— ë¬¶ì—¬ìˆëŠ” react component

  `screens/Home.js`, `screens/Login.js`

  ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì“°ë©´ ë¨~~

```js
// Home.js
function Home() {
    return <h1>Home</h1>
}

export default Home;
```

```js
// Login.js
const Login = () => <h1>Login</h1>

export default Login;
```



```js
function App() {
  const isLoggedIn = false;

  return (
    <Router>
      <Switch>
        <Route path="/" exact>
          {isLoggedIn ? <Home/> : <Login/>}
		// ë¡œê·¸ì¸í–ˆì„ ê²½ìš° / ì•ˆí–ˆì„ ê²½ìš° 
        </Route>
      </Switch>
    </Router>
  );
}
```

**route without path** : ì–´ë–¤ routeì—ë„ ë§¤ì¹­ë˜ì§€ ëª»í•œ ê²½ìš°

- ë§¨ ë’¤ì— ë¶™ì—¬ì¤˜ì•¼ í•¨

```js
<Route>
	<NotFound/>
</Route>
```

- redirectë¥¼ ì‚¬ìš©í•´ë„ ë¨

```js
<Route> // <Route> ì•ˆì¨ë„ë¨
    <Redirect to="/" />
</Route>
```



### #8.5 Auth POC(Proof of concept)

- how authentication works?

```js
const [isLoggedIn, setIsLoggedIn] = useState(false)  

// useState - react Hook
// [count, setCount] useState() 
// ì¸ìë¡œ ë„˜ê²¨ì£¼ëŠ” ê°’(false)ì€ stateì˜ ì´ˆê¸°ê°’
// useState()ëŠ” stateë³€ìˆ˜(this.state.count)ì™€ í•´ë‹¹ ë³€ìˆ˜ë¥¼ ê°±ì‹ í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜(this.setState) ë‘ê°€ì§€ë¥¼ ë°˜í™˜í•œë‹¤
```

- make both the Home, and Login have the authority to change "isLoggedIn"

```js
<Route path="/" exact>
          {isLoggedIn ? (
          <Home setIsLoggedIn={setIsLoggedIn}/>
          ) : (
          <Login setIsLoggedIn={setIsLoggedIn}/>)}
</Route>
```

- stateê°€ changeë˜ë©´ route componentë¥¼ ë‹¤ì‹œ render

```js
// Login.js
function Login({ setIsLoggedIn }) {
    return (
        <div>
            <h1>Login</h1>
        	// isLoggedIn = true ë¡œ ë³€ê²½
            <button onClick={() => setIsLoggedIn(true)}>Log in now!</button>
        </div>
    )
}
export default Login;
```

- ì´ ì ‘ê·¼ë°©ì‹ì€ ì™„ì „ ë³„ë¡œì„. propsë¥¼ ê³„ì† ë³´ë‚´ì•¼ í•¨(ê³„ì • ì§€ìš°ê¸°(ì§€ìš´ í›„ ë¡œê·¸ì•„ì›ƒ)ë¥¼ í• ë ¤ë©´ í”„ë¡œí•„-> ê³„ì •ì§€ìš°ê¸° í¼ -> ì‚­ì œí•˜ê¸°ë¡œ ì—¬ëŸ¬ ì¸µì— ê±¸ì³ì„œ setIsLoggedInì„ ê³„ì† ë‚´ë ¤ë³´ë‚´ì•¼í•¨)

- apollo clientë¥¼ ì‚¬ìš©í•´ì„œ ë¡œì»¬ state(isLoggedIn)ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ í• ê²ƒì„



### #8.6 Reactive Variables

- ëª©í‘œëŠ” ì–´ë–¤ component ë“  ì‚¬ìš©ìë¥¼ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ í•˜ê²Œ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒ (ì–´ë–¤ propë„ ë³´ë‚´ì§€ ì•Šê³ )

- **Reactive variables** ì‚¬ìš© << apollo clientì— í¬í•¨ë˜ì–´ìˆìŒ

  "ë³€í•˜ëŠ” variable"

  `const newVar = makeVar(default_value);`

- isLoggedIn, dark modeë¥¼ reactive variableë¡œ ì„ ì–¸(isLoggedInVar, darkVar)

  - isLoggedInVar() << ì´ë ‡ê²Œ ì‚¬ìš©, true or falseë¥¼ ë¦¬í„´

```js
// apollo.js
import { makeVar } from "@apollo/client";

export const isLoggedInVar = makeVar(false);
```

- component ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ hookì„ ì´ìš©í•´ì•¼í•¨

  `const isLoggedIn = useReactiveVar(isLoggedInVar)`

- ì–´ë””ì„œë“ ì§€ reactive variableì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŒ! (and re-render)

  ì™• ì–´ë ¤ìš°ë‹ˆê¹Œ ì˜ë´..

```js
// Login.js
function Login() {
    return (
        <div>
            <h1>Login</h1>
            <button onClick={() => isLoggedInVar(true)}>Log in now!</button>
        </div>
    )
}
```

- isLoggedInì„ ë¦¬ìŠ¤ë‹í•˜ëŠ” appì´ variableì´ ë³€í™”í–ˆì„ ë•Œ re-render



### #8.7 Introduction to Styled Components

- react styled-components
- styled.(ëª¨ë“  htmlìš”ì†Œ).`(style)`

```js
// Login.js
import styled from "styled-components";

const Title = styled.h1`  
	color : bisque;
`
const Container = styled.div`
    background-color: tomato;
`

function Login() {
    return (
        <Container>
            <Title>Login</Title>
            <button onClick={() => isLoggedInVar(true)}>Log in now!</button>
        </Container>
    )
}
```

- these are all react components (they also take props)

```js
const Title = styled.h1`
    color : ${props => props.potato ? "palevioletred" : "beige"};
`
const TogglePotato = styled.button`
    color:red;
`

function Login() {
    const [potato, setPotato] = useState(false);
    const togglePotato = () => setPotato((current) => !current)
    return (
        <Container>
            <Title potato={potato}>Login</Title>
            <TogglePotato onClick={togglePotato}>togglePotato</TogglePotato>
        </Container>
    )
}
```

- css í˜•ì‹ìœ¼ë¡œ ë” ë§ì€ ì†ì„±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ (ì½”ë“œ ì°¸ê³ )

```js
${props => props.potato ? css`(cssì½”ë“œ)` : css`(cssì½”ë“œ`}
```



### #8.8 Themes on Styled Components

- light, dark themes >> ThemeProvider (https://styled-components.com/docs/advanced)

- surround all your components with ThemeProvider

```js
// App.js
const lightTheme = {
  fontColor: "#2c2c2c",
  bgColor: "lightgray"
};
const darkTheme = {
  fontColor: "lightgray",
  bgColor: "#2c2c2c",
};

<ThemeProvider theme={darkMode ? darkTheme : lightTheme}>
      <Router>
       	...
      </Router>
</ThemeProvider>
```

```js
// Login.js
const Title = styled.h1`
    color : ${(props) => props.theme.fontColor};
`
const Container = styled.div`
    background-color: ${(props) => props.theme.bgColor};
`

function Login() {
    return (
        <Container>
            <Title>Login</Title>
            <button onClick={() => darkModeVar(true)}>To dark</button>
            <button onClick={() => darkModeVar(false)}>To Light</button>
        </Container>
    )
}
```

- dark modeë¡œ ê°„ í›„ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë‹¤ì‹œ light modeë¡œ ëŒì•„ê° (í˜„ì¬ modeë¥¼ ê¸°ì–µí•˜ê³  ìˆì§€ ì•ŠìŒ)

  => local storageì— ì €ì¥í•˜ê¸°(#10.14)



### #8.9 GlobalStyles on Style Components

- reset our css (npm i styled-reset) : ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ì–´ìˆëŠ” cssë¥¼ ëª¨ë‘ 0ìœ¼ë¡œ ë§Œë“¬

```js
// styles.js
import reset from "styled-reset";

export const GlobalStyles = createGlobalStyle`
    ${reset} // ìš°ì„ ì ìœ¼ë¡œ reset

// other css styles
    body { // ëª¨ë“  bodyì— ì ìš©
        background-color: beige;
    }
`

// App.js
<ThemeProvider theme={darkMode ? darkTheme : lightTheme}>
      <GlobalStyles />   // ì¶”ê°€
      <Router>
      ...
```

- <GlobalStyles />ê°€ <ThemeProvider> í•˜ìœ„ì— ìˆê¸° ë•Œë¬¸ì— GlobalStylesì—ì„œ themeì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤

```js
export const GlobalStyles = createGlobalStyle`
    body {
        background-color: ${(props) => props.theme.bgColor};
    }
`
```

