# ğŸ¦ DEVLOG 7/20



### #10.13 Redirecting users

**í˜ì´ì§€ ê°„ ì´ë™í•  ë•Œ ì•Œë¦¼ì¶”ê°€(ex.íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŒ)**

- redirect with states (routeì— state ì „ë‹¬)

  `history.push(routes.home,{message:"Account created. Please log in"});`

  ğŸ’¦ hashRouterë¥¼ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ `Warning: hash history cannot push state it is ignored` : ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„± -`history.push({ pathname: routes.home, message: "Account created. Please log in" });`

- useLocation (hook) : í˜„ì¬ ë¨¸ë¬´ë¥´ëŠ” í˜ì´ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ëŠ” hook

```js
// Login.js
function Login() {
    const location = useLocation();
    console.log(location);
// ìœ„ì—ì„œ ì „ë‹¬í•œ pathname, messageê°€ ë‹´ê¸´ object ì „ë‹¬
```

- Notification component ë§Œë“¤ê¸°

```js
// Login.js
<Notification>{location?.message}</Notification>  // hashRouter
<Notification>{location?.state?.message}</Notification> // browserRouter
```

- usernameê³¼ passwordë„ í•¨ê»˜ ë³´ë‚´ê¸° (ë¡œê·¸ì¸í˜ì´ì§€ì—ì„œ ë°”ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡)
  - getValues()

```js
const onCompleted = (data) => {
    const {username, password} = getValues();
    history.push({
        pathname : routes.home,
        message : "Account created. Please log in",
        username,
        password,
    })
}
```

- - defaultValues

```js
// Login.js
... = useForm({
    mode:"onChange",
    defaultValues : {
        username : location?.username || "",
        password : location?.password || "",
    }
})
```



### #10.14 Dark mode

1. ë²„íŠ¼

```JS
// AuthLayout.js
const darkMode = useReactiveVar(darkModeVar);
...
<DarkModeBtn onClick = {darkMode ? disableDarkmode : enableDarkMode}>
```

2. enable/disableDarkMode

```js
// apollo.js
export const enableDarkMode = () => {
    localStorage.setItem(DARK_MODE, "enabled");
    darkModeVar(true);
}
```



### #11.0 Header and Layout

- í˜„ì¬ header -> app.jsì—

```js
<Router>
    <Header />
    	<Switch>
    		...
```

- ê±°ì˜ ëª¨ë“  routeì— headerê°€ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ìŒ(**ë¡œê·¸ì¸, ê°€ì…í• ë•Œ ë¹¼ê³ **) => headerë‘ ê°™ì´ routeë¥¼ ë Œë”ë§í•´ì¤„ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°
  - ì»´í¬ë„ŒíŠ¸ Layoutì€ childrenê³¼ headerë¥¼ ê°™ì´ ë Œë”ë§

```js
// Layout.js
const Content = styled.main`
    margin-top : 45px;
    max-width : 930px;
    width:100%;
    margin : 0 auto;
`
function Layout({ children }) {
    return (
        <>
            <Header />
            <Content>
                {children}
            </Content>
        </>
    );
}
```

- ë¡œê·¸ì¸ë˜ì–´ìˆì„ë•Œë§Œ headerê°€ ë‚˜íƒ€ë‚˜ë„ë¡

```js
// App.js
<Route path={routes.home} exact>
    {isLoggedIn ? (
     	<Layout>
     		<Home />  // children
     	</Layout>) 
     	: 
     	<Login />}
```

