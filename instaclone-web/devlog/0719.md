# ğŸ¥‚ DEVLOG 7/19



### #10.5 Forms in React

```js
// Login.js
function Login() {
    const [username, setusername] = useState("");
    const onUsernameChange = (event) => {
        setusername(event.target.value);
    }
    
    return (
    ...
    <form>
    	<Input
    		onChange={onUsernameChange}
			value = {username}
			... />
	</form>
)
}
```

- handleSubmit

```js
const handleSubmit = (event) => {
        event.preventDefault();
        if (username === "") {
            setUsernameError("Not empty plz")
        }
        if (username.length < 10) {
            setUsernameError("too short");
        }
        console.log(username);
    }

...
 <form onSubmit={handleSubmit}>
```



### #10.6 Helmet Component

- íƒ€ì´í‹€(íƒ­ ì œëª©) ë°”ê¾¸ê¸°

```js
// Login.js
<Helmet>
	<title>Login | Instaclone</title>
</Helmet>
```

- helmet componentëŠ” helmet provider ì•ˆì— ìˆì–´ì•¼ í•œë‹¤

```js
// App.js
// HelmetProviderë¡œ ì „ë¶€ ê°ì‹¸ê¸°
function App() {
    ...
    return(
    	<HelmetProvider>
        	..
        </HelmetProvider>
    )
}
```

- PageTitleì„ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ê¸°

```js
// PageTitle.js
function PageTitle({ title }) {
    return <Helmet><title>{title} | Instaclone</title></Helmet>
}
```



### #10.7 React Hook Form

-  react hook form ì‚¬ìš©í•´ì„œ í¼ ë§Œë“¤ê¸°

1. **ëª¨ë“  ê²ƒì´ ë‹¨ í•œê°œì˜ hook(useForm hook) ìœ¼ë¡œë¶€í„° ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒ**
2.  **register**
   
   - stateì™€ setState, onChange functionì„ ë§Œë“œëŠ” ëª¨ë“  ê³¼ì •ì„ ëŒ€ì‹ í•¨
   
   - registerí•˜ëŠ” ê²ƒë“¤ì€ ëª¨ë‘ nameì„ ì¨ì¤˜ì•¼í•œë‹¤
   
     => watch() í• ë•Œ objectì— í•´ë‹¹ nameìœ¼ë¡œ ë‚˜íƒ€ë‚¨

```js
// Login.js
function Login() {
    const { register } = useForm(); 
}
...
<Input ref={register} name="username" type="text" placeholder="Username" />
<Input ref={register} name="password" type="password" placeholder="Password" />
```

ğŸ’¦ ì—ëŸ¬ : path.split is not a function(react-hook-formì´ 7.0.0ì´ìƒìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆì„ ë•Œ ë‚˜íƒ€ë‚¨)

- `ref={register}` ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½
  - `required:true`ëŠ” ë°˜ë“œì‹œ ì…ë ¥ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì†Œë¦¬ì¸ë“¯

```js
<Input {...register('username', { required: true })} .../>
<Input {...register('password', { required: true })} .../>
```



3. **ì…ë ¥ëœ valueë“¤ì„ ì½ìŒ =>  watch**

   - stateì˜ ê¸°ëŠ¥?

   -  username, password ì…ë ¥ê°’valueì˜ ë³€í™”ë¥¼ watch

```js
const { register, watch } = useForm();
console.log(watch());
// => ì…ë ¥ê°’ì´ ë³€í™”ë ë•Œë§ˆë‹¤ ì½˜ì†” ì¶œë ¥
```



4. **validation (useFormì— included)**

- usernameì˜ ìµœëŒ€ ê¸€ì ìˆ˜ ì œí•œ

```js
<Input {...register('username', { 
			required: true, 
			minLength:5, })}
```



5. **handleSubmit (ë„ useFormì— included)**

```js
const { register, watch, handleSubmit } = useForm();
```

- ë‘ê°œì˜  argumentë¥¼ ë°›ìŒ(onSubmitValid, onSubmitInvalid)
  1. formì´ validí•˜ë©´ formì´ validí•œì§€ í™•ì¸í•˜ëŠ” functionì„ call
  2. formì´ invalidí•˜ë©´ formì´ invalidí•œì§€ í™•ì¸í•˜ëŠ” functionì„ call

```js
const onSubmitValid = (data) => {
    console.log(data);
}
const onSubmitInvalid = (data) => {
    console.log(data, "Invalid");
}
...
<form onSubmit={handleSubmit(onSubmitValid, onSubmitInvalid)}>
// formì´ invalidí•˜ë©´ onSubmitInvalid ì‹¤í–‰
```

- ì—ëŸ¬ë©”ì„¸ì§€ë„ ì„¤ì •í•  ìˆ˜ ìˆìŒ

```js
<Input
	{...register('password', {
		required: "Password is required.",
})}
```



6. **validationì´ ì—¬ëŸ¬ê°œì¸ ê²½ìš°**

- ì¡°ê±´ì´ ì—¬ëŸ¬ê°œ ex. usernameì— "potato"ë¥¼ í¬í•¨í•˜ì‹œì˜¤

```js
{...register('username', {
	...
    validate: async (currentValue) => currentValue.includes("potato")
})}
```

- async ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ (ì‚¬ìš©ìê°€ usernameì„ ì…ë ¥í•˜ëŠ” ë™ì‹œì— ê·¸ê²ƒì´ validí•œì§€ ë°±ì—”ë“œì—ì„œ í™•ì¸)

- regex ì‚¬ìš©ê°€ëŠ¥ : `pattern : ~`

  

### #10.8 React Hook Form is Awesome

- useFormì€ ì—ëŸ¬ë„ ì œê³µí•´ì¤Œ(ë²„ì „ 7.0.0ì´ìƒì—ì„œ formState ë‚´ì— ìˆìŒ)
  - ì…ë ¥ê³¼ ë™ì‹œì— ì¦‰ê°ì ìœ¼ë¡œ ì—ëŸ¬í™•ì¸

```js
const { ... , formState } = useForm(){
    mode : "onChange",
};
console.log(formState.errors);
console.log(formState.isValid); // í¼ì´ ìœ íš¨í•œì§€ í™•ì¸(boolean)
```

- **mode**

  onSubmit : submití•œ ì‹œì ì—ì„œ validation ê²€ì‚¬

  onChange : ì‚¬ìš©ìê°€ inputì„ ì…ë ¥/ì‚­ì œí•¨ì— ë”°ë¼

  onBlur : inputì— ë¬´ì–¸ê°€ë¥¼ ì…ë ¥í•˜ê³  ë‹¤ë¥¸ ê³³ì„ í´ë¦­(focusê°€ í•´ì œë¨)

  onTouched : inputì„ í´ë¦­í•œ ìˆœê°„ë¶€í„° validation ì‹¤í–‰

- formState.isValidëŠ” ë¡œê·¸ì¸ë²„íŠ¼ì„ í™œì„±í™”/ë¹„í™œì„±í™”í•˜ëŠ”ë° ì‚¬ìš©ë¨ => <Button>ì— prop  ì „ë‹¬

```js
<Button type="submit" value="Log in" disabled={!formState.isValid}/>
// formStateê°€ invalidí•  ë•Œ disabled
    
// Button.js
opacity: ${props => props.disabled ? "0.5" : "1"};
```

- **painting errors**

```js
<Input
{...register('password', {
    required: "Password is required.",
})}
...
/>
{formState.errors?.password?.message}
// errorsê°€ ì¡´ì¬í•˜ê³ , errors.passwordê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° messageë¥¼ ë³´ì—¬ì¤Œ(password input ë°‘ì—)
```

- FormError ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ê¸°
  - marginìˆìœ¼ë©´ error messageê°€ ì¡´ì¬í•˜ë“  ì•ˆí•˜ë“  í•­ìƒ ê·¸ ìë¦¬ë¥¼ ì°¨ì§€í•¨ => messageê°€ empty stringì´ê±°ë‚˜ nullì¸ ê²½ìš°ì—ë§Œ ë¦¬í„´

```js
// FormError.js
const SFormError = styled.span`
    color : tomato;
    font-weight : 600;
    font-size:12px;
    margin: 5px 0px 10px 0px;
`

function FormError({ message }) {
    return message === "" || !message ? null : <SFormError>{message}</SFormError>
}

```

- validí•˜ì§€ ì•Šì„ ê²½ìš° input ìƒìì— í‘œì‹œí•˜ê¸°
  - hasError prop ì‚¬ìš©

```js
// Login
<Input 
	...
   	hasError = {Boolean(formState.errors?.password?.message)}
/>
```



```js
// Input.js
    border : ${(props) => (props.hasError ? "tomato" : props.theme.borderColor)};

```

